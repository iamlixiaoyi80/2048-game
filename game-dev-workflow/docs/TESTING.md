# æ¸¸æˆæµ‹è¯•ç­–ç•¥æ–‡æ¡£

å®Œæ•´çš„æ¸¸æˆæµ‹è¯•æŒ‡å—ï¼Œç¡®ä¿æ¸¸æˆè´¨é‡å’Œç¨³å®šæ€§ã€‚

## ğŸ¯ æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰

æµ‹è¯•å•ä¸ªå‡½æ•°ã€æ–¹æ³•æˆ–ç±»çš„è¡Œä¸ºã€‚

#### æµ‹è¯•èŒƒå›´

- âœ… ç©å®¶æ§åˆ¶å™¨ï¼ˆç§»åŠ¨ã€è·³è·ƒã€æ”»å‡»ï¼‰
- âœ… æ•ŒäººAIï¼ˆçŠ¶æ€è½¬æ¢ã€å†³ç­–é€»è¾‘ï¼‰
- âœ… æ¸¸æˆç®¡ç†å™¨ï¼ˆçŠ¶æ€æœºã€äº‹ä»¶ç³»ç»Ÿï¼‰
- âœ… å·¥å…·ç±»ï¼ˆå‘é‡è®¡ç®—ã€ç¢°æ’æ£€æµ‹ï¼‰

#### æµ‹è¯•ç¤ºä¾‹

```csharp
// ç©å®¶ç§»åŠ¨æµ‹è¯•
[Test]
public void TestPlayerMoveRight()
{
    var player = new Player();
    float initialX = player.Position.X;
    player.Move(Vector2.Right * 10f);
    Assert.Greater(player.Position.X, initialX);
}

// æ•ŒäººAIæµ‹è¯•
[Test]
public void TestEnemyPatrolState()
{
    var enemy = new Enemy(AIType.Patrol);
    Assert.AreEqual(EnemyState.Patrolling, enemy.CurrentState);
}

// ç¢°æ’æ£€æµ‹æµ‹è¯•
[Test]
public void TestCollisionDetection()
{
    var collider = new BoxCollider(Vector2.Zero, Vector2.One);
    Assert.IsTrue(collider.CheckCollision(Vector2(0.5f, 0.5f)));
}
```

### 2. é›†æˆæµ‹è¯•ï¼ˆIntegration Testingï¼‰

æµ‹è¯•å¤šä¸ªç»„ä»¶ååŒå·¥ä½œã€‚

#### æµ‹è¯•åœºæ™¯

- âœ… ç©å®¶ä¸æ•Œäººäº¤äº’
- âœ… ç‰©å“æ‹¾å–å’Œåº“å­˜ç³»ç»Ÿ
- âœ… åœºæ™¯åˆ‡æ¢å’Œæ•°æ®æŒä¹…åŒ–
- âœ… UIä¸æ¸¸æˆé€»è¾‘ç»‘å®š

#### æµ‹è¯•æµç¨‹

```bash
# ä½¿ç”¨æ™ºèƒ½ä½“ç”Ÿæˆé›†æˆæµ‹è¯•
./scripts/test-agent.sh --integration
```

### 3. æ€§èƒ½æµ‹è¯•ï¼ˆPerformance Testingï¼‰

æµ‹è¯•æ¸¸æˆåœ¨å„ç§æ¡ä»¶ä¸‹çš„æ€§èƒ½ã€‚

#### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|--------|---------|-----------|
| å¸§ç‡ï¼ˆFPSï¼‰ | > 60 | Unity Profiler |
| åŠ è½½æ—¶é—´ | < 3ç§’ | æ‰‹åŠ¨è®¡æ—¶ |
| å†…å­˜å ç”¨ | < 500MB | Profiler |
| ç»˜åˆ¶è°ƒç”¨ | < 1000 | Profiler |

#### æ€§èƒ½ä¼˜åŒ–

```bash
# ä½¿ç”¨æ™ºèƒ½ä½“ä¼˜åŒ–æ€§èƒ½
./scripts/dev-agent.sh "ä¼˜åŒ–æ¸¸æˆæ€§èƒ½ï¼š
1. å‡å°‘Draw Call
2. ä½¿ç”¨å¯¹è±¡æ± 
3. ä¼˜åŒ–ç¢°æ’æ£€æµ‹
4. ä½¿ç”¨LODï¼ˆç»†èŠ‚å±‚æ¬¡ï¼‰"
```

### 4. è¾¹ç•Œæµ‹è¯•ï¼ˆEdge Case Testingï¼‰

æµ‹è¯•æç«¯å’Œè¾¹ç•Œæƒ…å†µã€‚

#### æµ‹è¯•åœºæ™¯

- âœ… ç©ºå€¼å’Œnullè¾“å…¥
- âœ… æå¤§/æå°æ•°å€¼
- âœ… é›¶é™¤æ³•
- âœ… ç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…
- âœ… å†…å­˜ä¸è¶³æƒ…å†µ

### 5. å…¼å®¹æ€§æµ‹è¯•ï¼ˆCompatibility Testingï¼‰

æµ‹è¯•æ¸¸æˆåœ¨ä¸åŒå¹³å°å’Œè®¾å¤‡ä¸Šçš„è¡¨ç°ã€‚

#### æµ‹è¯•çŸ©é˜µ

| å¹³å° | è®¾å¤‡ | åˆ†è¾¨ç‡ | æµ‹è¯•çŠ¶æ€ |
|--------|--------|---------|----------|
| Windows | PC | 1920x1080 | â¬œ |
| macOS | MacBook | 2560x1440 | â¬œ |
| Linux | Ubuntu | 1920x1080 | â¬œ |
| iOS | iPhone 14 | 390x844 | â¬œ |
| Android | Pixel 7 | 1080x2400 | â¬œ |

## ğŸš€ è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹

### ä½¿ç”¨æµ‹è¯•æ™ºèƒ½ä½“

```bash
# ç”Ÿæˆå®Œæ•´æµ‹è¯•å¥—ä»¶
./scripts/test-agent.sh --all

# æ™ºèƒ½ä½“ä¼šè‡ªåŠ¨ï¼š
# 1. ç¼–å†™æ‰€æœ‰ç±»å‹çš„æµ‹è¯•
# 2. è¿è¡Œæµ‹è¯•å¥—ä»¶
# 3. ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
# 4. ä¿®å¤å¤±è´¥çš„æµ‹è¯•
```

### CI/CDé›†æˆ

æµ‹è¯•ä¼šåœ¨æ¯æ¬¡ä»£ç æäº¤æ—¶è‡ªåŠ¨è¿è¡Œï¼š

```yaml
# .github/workflows/ci-cd.yml
test:
  name: Run Tests
  runs-on: ubuntu-latest
  steps:
    - name: Run Unity Tests
      uses: game-ci/unity-test-runner@v2
      with:
        testMode: all
        coverageOptions: 'generateAdditionalMetrics;generateHtmlReport'
```

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

### è¦†ç›–ç‡æ ‡å‡†

- âœ… **æ€»ä½“è¦†ç›–ç‡**: > 80%
- âœ… **æ ¸å¿ƒæ¨¡å—**: > 95%
- âœ… **å·¥å…·ç±»**: > 90%
- âœ… **UIä»£ç **: > 70%

### æå‡è¦†ç›–ç‡

```bash
# æ™ºèƒ½ä½“è¡¥å……æµ‹è¯•
./scripts/test-agent.sh --coverage

# Codexä¼šï¼š
# 1. è¯†åˆ«æœªè¦†ç›–çš„ä»£ç 
# 2. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
# 3. ç¡®ä¿è¦†ç›–ç‡è¾¾æ ‡
```

## ğŸ› BugæŠ¥å‘Šæµç¨‹

### Bugç”Ÿå‘½å‘¨æœŸ

1. **å‘ç°Bug**
   - æµ‹è¯•ä¸­å‘ç°é—®é¢˜
   - ç”¨æˆ·åé¦ˆé—®é¢˜

2. **è®°å½•Bug**
   - åˆ›å»ºGitHub Issue
   - åœ¨Trelloæ·»åŠ å¡ç‰‡

3. **é‡ç°Bug**
   - ç¼–å†™æµ‹è¯•ç”¨ä¾‹
   - ç¡®è®¤Bugå¯é‡ç°

4. **ä¿®å¤Bug**
   - ä½¿ç”¨å¼€å‘æ™ºèƒ½ä½“ä¿®å¤
   - è¿è¡Œæµ‹è¯•éªŒè¯

5. **å…³é—­Bug**
   - æµ‹è¯•é€šè¿‡
   - éƒ¨ç½²ä¿®å¤ç‰ˆæœ¬

### Bugæ¨¡æ¿

```
æ ‡é¢˜: [å¹³å°] ç®€çŸ­æè¿°

ç¯å¢ƒ:
- æ“ä½œç³»ç»Ÿ:
- å¼•æ“ç‰ˆæœ¬:
- æ¸¸æˆç‰ˆæœ¬:

é‡ç°æ­¥éª¤:
1. æ­¥éª¤1
2. æ­¥éª¤2
3. æ­¥éª¤3

é¢„æœŸè¡Œä¸º:
åº”è¯¥å‘ç”Ÿä»€ä¹ˆ

å®é™…è¡Œä¸º:
å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ

æˆªå›¾/æ—¥å¿—:
[é™„ä»¶]

ä¼˜å…ˆçº§: é«˜/ä¸­/ä½
```

## ğŸ¨ æµ‹è¯•æœ€ä½³å®è·µ

### 1. æµ‹è¯•ä¼˜å…ˆçº§

```
P0 - å…³é”®åŠŸèƒ½ï¼šå¿…é¡»æµ‹è¯•
  - ç©å®¶æ§åˆ¶
  - æ¸¸æˆæ ¸å¿ƒå¾ªç¯
  - å­˜æ¡£ç³»ç»Ÿ

P1 - é‡è¦åŠŸèƒ½ï¼šåº”è¯¥æµ‹è¯•
  - æ•ŒäººAI
  - ç‰©å“ç³»ç»Ÿ
  - UIç•Œé¢

P2 - ä¸€èˆ¬åŠŸèƒ½ï¼šå¯ä»¥æµ‹è¯•
  - éŸ³æ•ˆç³»ç»Ÿ
  - åŠ¨ç”»æ•ˆæœ
  - é€‰é¡¹èœå•
```

### 2. æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰

```bash
# 1. å…ˆå†™æµ‹è¯•
./scripts/test-agent.sh --unit

# 2. è¿è¡Œæµ‹è¯•ï¼ˆåº”è¯¥å¤±è´¥ï¼‰

# 3. å†™ä»£ç è®©æµ‹è¯•é€šè¿‡
./scripts/dev-agent.sh "å®ç°ä»£ç ä»¥é€šè¿‡æµ‹è¯•"

# 4. é‡æ„å’Œä¼˜åŒ–
./scripts/dev-agent.sh --mode review "é‡æ„ä»£ç "
```

### 3. æŒç»­æµ‹è¯•

- âœ… æ¯æ¬¡æäº¤è¿è¡Œæµ‹è¯•
- âœ… å®šæœŸè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- âœ… ä½¿ç”¨è¦†ç›–ç‡æŠ¥å‘ŠæŒ‡å¯¼æµ‹è¯•

### 4. è‡ªåŠ¨åŒ–ä¸€åˆ‡

```bash
# å®šæ—¶æµ‹è¯•æé†’
# ã€Œæ¯å¤©ä¸Šåˆ10ç‚¹æé†’è¿è¡Œå®Œæ•´æµ‹è¯•ã€

# CI/CDè‡ªåŠ¨åŒ–
# æ¨é€ä»£ç  -> è‡ªåŠ¨æ„å»º -> è‡ªåŠ¨æµ‹è¯•
```

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

### æŠ¥å‘Šå†…å®¹

æ¯æ¬¡æµ‹è¯•è¿è¡Œç”ŸæˆæŠ¥å‘Šï¼š

```markdown
# æµ‹è¯•æŠ¥å‘Š - 2025-01-15

## æµ‹è¯•ç»Ÿè®¡
- æ€»æµ‹è¯•æ•°: 156
- é€šè¿‡: 148
- å¤±è´¥: 8
- è·³è¿‡: 0
- è¦†ç›–ç‡: 82%

## å¤±è´¥æµ‹è¯•
- [ ] TestPlayerJumpWhenGrounded
- [ ] TestEnemyPathfinding
- [ ] TestUIHealthBarUpdate

## è¦†ç›–ç‡è¯¦æƒ…
| æ¨¡å— | è¦†ç›–ç‡ | çŠ¶æ€ |
|--------|---------|------|
| PlayerController | 95% | âœ… |
| EnemyAI | 78% | âš ï¸  |
| GameManager | 92% | âœ… |
| UIManager | 65% | âŒ |

## ä¸‹ä¸€æ­¥
- ä¿®å¤8ä¸ªå¤±è´¥æµ‹è¯•
- æå‡EnemyAIè¦†ç›–ç‡åˆ°85%
- ä¸ºUIManagerè¡¥å……æµ‹è¯•
```

---

*by OpenClaw ğŸ¦*
